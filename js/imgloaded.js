function getRandomImage(e){const t=Math.floor(Math.random()*300)+100;if(e==="pc"){return`https://img.loliapi.com/i/pc/img${t}.webp`}else if(e==="pe"){return`https://img.loliapi.com/i/pe/img${t}.webp`}}if(typeof initLargeSrc==="undefined"){initLargeSrc=getRandomImage("pc")}if(typeof initSmallSrc==="undefined"){initSmallSrc=getRandomImage("pe")}if(!window.ProgressiveLoad){class e{constructor(e,t){this.smallSrc=e;this.largeSrc=t;this.initTpl();this.initScrollListener()}initScrollListener(){const e=document.getElementById("page-header");if(e&&e.classList.contains("full_page")){document.body.style.setProperty("--animate","true");window.addEventListener("scroll",(()=>{var e=Math.min(window.scrollY/window.innerHeight,.7);this.container.style.setProperty("--process",e)}))}else{this.container.style.setProperty("--process",.7)}}initTpl(){this.container=document.createElement("div");this.smallStage=document.createElement("div");this.largeStage=document.createElement("div");this.video=document.createElement("div");this.smallImg=new Image;this.largeImg=new Image;this.container.className="pl-container";this.container.style.setProperty("--process",0),this.smallStage.className="pl-img pl-blur";this.largeStage.className="pl-img";this.video.className="pl-video";this.container.appendChild(this.smallStage);this.container.appendChild(this.largeStage);this.container.appendChild(this.video);this.smallImg.onload=this._onSmallLoaded.bind(this);this.largeImg.onload=this._onLargeLoaded.bind(this)}progressiveLoad(){this.smallImg.src=this.smallSrc;this.largeImg.src=this.largeSrc}_onLargeLoaded(){this.largeStage.classList.add("pl-visible");this.largeStage.style.backgroundImage=`url('${this.largeSrc}')`}_onSmallLoaded(){this.smallStage.classList.add("pl-visible");this.smallStage.style.backgroundImage=`url('${this.smallSrc}')`}}const t=(t,i)=>{console.log("执行渐进背景替换");const a=window.matchMedia("(max-width: 767px)").matches;const s=new e(a?t.mobileSmallSrc:t.smallSrc,a?t.mobileLargeSrc:t.largeSrc);if(i.children.length>0){i.insertBefore(s.container,i.children[0])}else{i.appendChild(s.container)}s.progressiveLoad()};const i={smallSrc:initLargeSrc,largeSrc:initLargeSrc,mobileSmallSrc:initSmallSrc,mobileLargeSrc:initSmallSrc,enableRoutes:["/"]};function initProgressiveLoad(e){const i=document.querySelector(".pl-container");if(i){i.remove()}const a=document.getElementById("web-header");if(a&&a.classList.contains("full_page")){t(e,a)}}function onPJAXComplete(e){const t=document.getElementById("web-header");if(t&&t.classList.contains("full_page")){initProgressiveLoad(e)}}document.addEventListener("DOMContentLoaded",(function(){initProgressiveLoad(i)}));document.addEventListener("pjax:complete",(function(){onPJAXComplete(i)}))}